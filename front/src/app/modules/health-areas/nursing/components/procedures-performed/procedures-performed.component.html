<div class="procedimientos-realizados card-form w-full">
  <div class="flex items-center gap-2">
    <button type="button" class="head-card w-full flex items-center gap-2 t-h2 text-gray-600 font-bold"
            (click)="active.set(!active())">
      <div class="cursor-pointer {{active() ? 'rotate-0' : '-rotate-90'}}">
        <svg class="stroke-current" width="16" height="17" viewBox="0 0 16 17" fill="none"
             xmlns="http://www.w3.org/2000/svg">
          <path d="M13 6L8 11L3 6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <span>Procedimiento realizado</span>
    </button>
    @if (canSaveForm) {
      <button type="button" class="p-1 rounded-lg hover:bg-gray-200" (click)="deleteForm.emit()">
        <div>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M14.74 9.00003L14.394 18M9.606 18L9.26 9.00003M19.228 5.79003C19.57 5.84203 19.91 5.89703 20.25 5.95603M19.228 5.79003L18.16 19.673C18.1164 20.2383 17.8611 20.7662 17.445 21.1513C17.029 21.5364 16.4829 21.7502 15.916 21.75H8.084C7.5171 21.7502 6.97102 21.5364 6.55498 21.1513C6.13894 20.7662 5.88359 20.2383 5.84 19.673L4.772 5.79003M19.228 5.79003C18.0739 5.61555 16.9138 5.48313 15.75 5.39303M4.772 5.79003C4.43 5.84103 4.09 5.89603 3.75 5.95503M4.772 5.79003C5.92613 5.61555 7.08623 5.48313 8.25 5.39303M15.75 5.39303V4.47703C15.75 3.29703 14.84 2.31303 13.66 2.27603C12.5536 2.24067 11.4464 2.24067 10.34 2.27603C9.16 2.31303 8.25 3.29803 8.25 4.47703V5.39303M15.75 5.39303C13.2537 5.20011 10.7463 5.20011 8.25 5.39303"
              stroke="#CA1515" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </button>
    }
  </div>

  @if (active()) {
    @if (canSaveForm) {
      <form [formGroup]="form" class="card-body w-full flex flex-col gap-4">
        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4">
          <div class="i-field w-full">
            <label>Procedimiento</label>
            <select formControlName="procedimiento" class="cursor-pointer">
              <option value="">Seleccione un procedimiento</option>
              @for (typeProcedure of typesProcedures; track $index) {
                <option [value]="typeProcedure">{{ typeProcedure }}</option>
              }
            </select>
          </div>
          <div class="i-field">
            <label>Detalle</label>
            <input formControlName="comentarios" type="text">
          </div>
          <div class="i-field">
            <label>Area solicitante</label>
            <select formControlName="area_solicitante" class="cursor-pointer" (change)="onSelectArea($event)">
              <option value="">Seleccione una area</option>
              @for (area of areas; track $index) {
                <option [value]="area">{{ area|titlecase }}</option>
              }
            </select>
          </div>
          <div class="i-field">
            <label>Especialista solicitante</label>
            <input formControlName="especialista_solicitante" type="text">
          </div>
          <div class="i-field">
            <label>Numero recibo</label>
            <input #recibo onlyNumbers formControlName="numero_recibo" type="text"
                   (keyup.enter)="onValidateRecibo(recibo.value)">
          </div>
          <div class="i-field">
            <label>Costo</label>
            <input formControlName="costo" type="text">
          </div>
          <div class="i-field">
            <label>Fecha de pago</label>
            <input formControlName="fecha_pago" type="datetime-local">
          </div>
        </div>
      </form>
    }
  }
</div>
<app-block-ui [show]="isBlockPage()"></app-block-ui>
