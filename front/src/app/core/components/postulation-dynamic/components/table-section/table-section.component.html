@if(!activeForm) {
  <button type="button" (click)="loadFormSection(section().requisitos)"
          class="flex items-center justify-center w-1/2 px-5 py-2 text-sm text-gray-700 capitalize transition-colors duration-200 bg-white border rounded-md sm:w-auto gap-x-2 hover:bg-gray-100 mt-2 mb-8">
    Agregar una fila
  </button>
}

@if(activeForm) {
  <app-section-form [formDynamic]="formSection"
                    [recordRequirements]="recordRequirements()"
                    [section]="section()"
  ></app-section-form>

  <div class="w-full flex items-center py-4 space-x-2">
    <button
      type="button"
      (click)="saveForm()"
      class="flex items-center justify-center capitalize px-5 py-2 text-sm text-white transition-colors duration-200 border rounded-md gap-x-2"
      style="background: #1abb9c;">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="w-6 h-6"
        viewBox="0 0 512 512"
      >
        <path
          d="M380.93 57.37A32 32 0 00358.3 48H94.22A46.21 46.21 0 0048 94.22v323.56A46.21 46.21 0 0094.22 464h323.56A46.36 46.36 0 00464 417.78V153.7a32 32 0 00-9.37-22.63zM256 416a64 64 0 1164-64 63.92 63.92 0 01-64 64zm48-224H112a16 16 0 01-16-16v-64a16 16 0 0116-16h192a16 16 0 0116 16v64a16 16 0 01-16 16z"
          fill="none"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="32"
        />
      </svg>
      {{isEdit ? 'Guardar cambios' : 'Agregar'}}
    </button>
    <button type="button" (click)="resetForm()"
            class="flex items-center justify-center w-1/2 px-5 py-2 text-sm text-gray-700 capitalize transition-colors duration-200 bg-white border rounded-md sm:w-auto gap-x-2 hover:bg-gray-100">
      Cancelar
    </button>
  </div>
}

<div class="overflow-hidden border border-gray-200 md:rounded-lg">
  <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
    <table class="w-full text-sm text-left text-gray-600">
      <thead class="text-xs uppercase bg-gray-100">
      <tr>
        <th scope="col" class="px-4 py-3 text-center font-semibold">
          NÂ°
        </th>
        @for (req of section().requisitos; track req) {
          <th scope="col" class="px-4 py-3 text-center font-semibold whitespace-nowrap">
            {{req.nombre}}
          </th>
        }
        <th scope="col" class="px-4 py-3 text-center font-semibold">
          Acciones
        </th>
      </tr>
      </thead>
      <tbody>
        @for(item of arrayValue(); track item; let i = $index) {
          <tr class="bg-white border-b hover:bg-gray-50 transition-colors">
            <td class="px-4 py-3 text-center font-medium">
              {{i + 1}}
            </td>
            @for (req of section().requisitos; track req) {
              <td class="px-4 py-3 text-center">
                <div class="font-medium">
                  {{item[req.id?.toString()!]}}
                </div>
              </td>
            }
            <td class="px-4 py-3">
              <div class="flex items-center justify-center space-x-4">
                <button
                  class="text-red-500 hover:text-red-700 transition-colors p-2 rounded-full hover:bg-red-50"
                  title="Eliminar Tesista o practicante"
                  (click)="deleteRow(i)"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5"
                    viewBox="0 0 512 512"
                  >
                    <path
                      d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-miterlimit="10"
                      stroke-width="32"
                      d="M80 112h352"
                    />
                    <path
                      d="M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                  </svg>
                </button>
                <button
                  class="text-blue-500 hover:text-blue-700 transition-colors p-2 rounded-full hover:bg-blue-50"
                  title="Editar tesista o practicante"
                  (click)="editRow(item, i)"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5"
                    viewBox="0 0 512 512"
                  >
                    <path
                      d="M384 224v184a40 40 0 01-40 40H104a40 40 0 01-40-40V168a40 40 0 0140-40h167.48"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                    <path
                      d="M459.94 53.25a16.06 16.06 0 00-23.22-.56L424.35 65a8 8 0 000 11.31l11.34 11.32a8 8 0 0011.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38zM399.34 90L218.82 270.2a9 9 0 00-2.31 3.93L208.16 299a3.91 3.91 0 004.86 4.86l24.85-8.35a9 9 0 003.93-2.31L422 112.66a9 9 0 000-12.66l-9.95-10a9 9 0 00-12.71 0z"
                    />
                  </svg>
                </button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
